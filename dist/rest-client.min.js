var RestClient=(()=>{var w=Object.create;var _=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var S=t=>_(t,"__esModule",{value:!0});var m=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var b=(t,s,o,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of v(s))!P.call(t,n)&&(o||n!=="default")&&_(t,n,{get:()=>s[n],enumerable:!(c=E(s,n))||c.enumerable});return t},H=(t,s)=>b(S(_(t!=null?w(C(t)):{},"default",!s&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var y=m((k,g)=>{g.exports=function(t){var s={},o=[];t=t||this,t.on=function(c,n,e){return(s[c]=s[c]||[]).push([n,e]),t},t.off=function(c,n){c||(s={});for(var e=s[c]||o,r=e.length=n?e.length:0;r--;)n==e[r][0]&&e.splice(r,1);return t},t.emit=function(c){for(var n,e=s[c]||o,r=e.length>0?e.slice(0,e.length):e,i=0;n=r[i++];)n[0].apply(n[1],o.slice.call(arguments,1));return t}}});var x=m((R,j)=>{var a=H(y());function O(t){let s="";for(let o in t)s+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return s.substr(0,s.length-1)}function q(t,s){try{return t(s)}catch(o){return console.error('Error in function "'+t.name+'" while decode/encode data'),console.log(t),console.log(s),console.log(o),s}}var T=class{constructor(s,o){this.host=s,this.conf(o),new a.default(this),d(this,void 0,"",void 0,this)}conf(s={}){let o=this._opts||{trailing:"",shortcut:!0,shortcutRules:[],contentType:"application/json","application/x-www-form-urlencoded":{encode:O},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=Object.assign(o,s),Object.assign({},this._opts)}_request(s,o,c=null,n=null){o.indexOf("?")===-1?o+=this._opts.trailing:o=o.replace("?",this._opts.trailing+"?");let e=new XMLHttpRequest;if(e.open(s,this.host+o,!0),n){let i=this._opts[n];i&&i.encode&&(c=q(i.encode,c)),n==="multipart/form-data"&&c.constructor.name==="FormData"||e.setRequestHeader("Content-Type",n)}let r=new Promise((i,l)=>e.onreadystatechange=()=>{if(e.readyState===4)if(this.emit("response",e),r.emit("response",e),e.status===200||e.status===201||e.status===204){this.emit("success",e),r.emit("success",e);let u=e.response,f=e.getResponseHeader("Content-Type");if(f){let h=f.split(";")[0],p=this._opts[h];p&&p.decode&&(u=q(p.decode,u))}r.off(),i(u)}else this.emit("error",e),r.emit("error",e),r.off(),l(e)});return new a.default(r),Promise.resolve().then(()=>{this.emit("request",e),r.emit("request",e),e.send(c)}),r}};function d(t,s,o,c,n){let e=n||(r=>r===void 0?e:e._clone(s,r));return e._resources={},e._shortcuts={},e._clone=(r,i)=>{let l=d(t,r,o,i);l._shortcuts=e._shortcuts;for(let u in e._resources)l._resources[u]=e._resources[u]._clone(l),u in l._shortcuts&&(l[u]=l._resources[u]);return l},e.res=(r,i=t._opts.shortcut)=>{let l=u=>{if(u in e._resources)return e._resources[u];let f=d(t,e,u);return e._resources[u]=f,i&&(e._shortcuts[u]=f,e[u]=f,t._opts.shortcutRules.forEach(h=>{let p=h(u);p&&typeof p=="string"&&(e._shortcuts[p]=f,e[p]=f)})),f};if(r.constructor===String)return l(r);if(r instanceof Array)return r.map(l);if(r instanceof Object){let u={};for(let f in r){let h=l(f);r[f]&&h.res(r[f]),u[f]=h}return u}},e.url=()=>{let r=s?s.url():"";return o&&(r+="/"+o),c!==void 0&&(r+="/"+c),r},e.get=(...r)=>{let i=e.url(),l=r.map(O).join("&");return l&&(i+="?"+l),t._request("GET",i)},e.post=(r,i=t._opts.contentType)=>t._request("POST",e.url(),r,i),e.put=(r,i=t._opts.contentType)=>t._request("PUT",e.url(),r,i),e.patch=(r,i=t._opts.contentType)=>t._request("PATCH",e.url(),r,i),e.delete=()=>t._request("DELETE",e.url()),e}Object.defineProperty(R,"__esModule",{value:!0});j.exports=T});return x();})();
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    define(factory);
  } else if (typeof module === 'object' && module.exports) {
    module.exports = factory();
  } else {
    root.RestClient = factory();
  }
}(typeof self !== 'undefined' ? self : this, () => RestClient));
//# sourceMappingURL=rest-client.min.js.map
