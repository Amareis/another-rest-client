!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t.substr(0,t.length-1)}function i(e,t){try{return e(t)}catch(n){return console.error('Error in function "'+e.name+'" while decode/encode data'),console.log(e),console.log(t),console.log(n),t}}function u(e,t,n,r,o){var i=o?o:function(e){return void 0===e?i:i._clone(t,e)};return i._resources={},i._shortcuts={},i._clone=function(t,r){var o=u(e,t,n,r);o._shortcuts=i._shortcuts;for(var s in i._resources)o._resources[s]=i._resources[s]._clone(o),s in o._shortcuts&&(o[s]=o._resources[s]);return o},i.res=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.shortcut:arguments[1],r=function(t){if(t in i._resources)return i._resources[t];var r=u(e,i,t);return i._resources[t]=r,n&&(i._shortcuts[t]=r,i[t]=r),r};if(t.constructor===String)return r(t);if(t instanceof Array)return t.map(r);if(t instanceof Object){var o={};for(var s in t){var c=r(s);t[s]&&c.res(t[s]),o[s]=c}return o}},i.url=function(){var e=t?t.url():"";return n&&(e+="/"+n),void 0!==r&&(e+="/"+r),e},i.get=function(t){var n=i.url();return t&&(n+="?"+s(t)),e._request("GET",n)},i.post=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.contentType:arguments[1];return e._request("POST",i.url(),t,n)},i.put=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.contentType:arguments[1];return e._request("PUT",i.url(),t,n)},i.patch=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.contentType:arguments[1];return e._request("PATCH",i.url(),t,n)},i["delete"]=function(){return e._request("DELETE",i.url())},i}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),l=r(f),p=function(){function e(t,n){o(this,e),this.host=t,this.conf(n),new l["default"](this),u(this,void 0,"",void 0,this)}return a(e,[{key:"conf",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this._opts||{trailing:"",shortcut:!0,contentType:"application/json","application/x-www-form-urlencoded":{encode:s},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=c(t,e),c({},this._opts)}},{key:"_request",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3];-1===t.indexOf("?")?t+=this._opts.trailing:t=t.replace("?",this._opts.trailing+"?");var s=new XMLHttpRequest;if(s.open(e,this.host+t,!0),o){var u=this._opts[o];u&&u.encode&&(r=i(u.encode,r)),s.setRequestHeader("Content-Type",o)}var c=new Promise(function(e,t){return s.onreadystatechange=function(){if(4===s.readyState)if(n.emit("response",s),c.emit("response",s),200===s.status||201===s.status||204===s.status){n.emit("success",s),c.emit("success",s);var r=s.responseText,o=s.getResponseHeader("Content-Type");if(o){var u=o.split(";")[0],a=n._opts[u];a&&a.decode&&(r=i(a.decode,r))}c.off(),e(r)}else n.emit("error",s),c.emit("error",s),c.off(),t(s)}});return new l["default"](c),this.emit("request",s),c.emit("request",s),s.send(r),c}}]),e}();e.exports=p},function(e,t){e.exports=function(e){var t={},n=[];e=e||this,e.on=function(n,r,o){return(t[n]=t[n]||[]).push([r,o]),e},e.off=function(r,o){r||(t={});for(var s=t[r]||n,i=s.length=o?s.length:0;i--;)o==s[i][0]&&s.splice(i,1);return e},e.emit=function(r){for(var o,s=t[r]||n,i=s.length>0?s.slice(0,s.length):s,u=0;o=i[u++];)o[0].apply(o[1],n.slice.call(arguments,1));return e}}}])});
//# sourceMappingURL=rest-client.min.js.map