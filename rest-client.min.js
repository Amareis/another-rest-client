!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t="";for(var r in e)t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&";return t.substr(0,t.length-1)}function u(e,t){try{return e(t)}catch(r){return console.error('Error in function "'+e.name+'" while decode/encode data'),console.log(e),console.log(t),console.log(r),t}}function i(e,t,r,n,o){var u=o?o:function(e){return void 0===e?u:u._clone(t,e)};return u._resources={},u._shortcuts={},u._clone=function(t,n){var o=i(e,t,r,n);o._shortcuts=u._shortcuts;for(var s in u._resources)o._resources[s]=u._resources[s]._clone(o),s in o._shortcuts&&(o[s]=o._resources[s]);return o},u.res=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.shortcut,n=function(t){if(t in u._resources)return u._resources[t];var n=i(e,u,t);return u._resources[t]=n,r&&(u._shortcuts[t]=n,u[t]=n,e._opts.shortcutRules.forEach(function(e){var r=e(t);r&&"string"==typeof r&&(u._shortcuts[r]=n,u[r]=n)})),n};if(t.constructor===String)return n(t);if(t instanceof Array)return t.map(n);if(t instanceof Object){var o={};for(var s in t){var c=n(s);t[s]&&c.res(t[s]),o[s]=c}return o}},u.url=function(){var e=t?t.url():"";return r&&(e+="/"+r),void 0!==n&&(e+="/"+n),e},u.get=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=u.url(),i=r.map(s).join("&");return i&&(o+="?"+i),e._request("GET",o)},u.post=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.contentType;return e._request("POST",u.url(),t,r)},u.put=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.contentType;return e._request("PUT",u.url(),t,r)},u.patch=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.contentType;return e._request("PATCH",u.url(),t,r)},u.delete=function(){return e._request("DELETE",u.url())},u}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),l=n(f),p=function(){function e(t,r){o(this,e),this.host=t,this.conf(r),new l.default(this),i(this,void 0,"",void 0,this)}return a(e,[{key:"conf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._opts||{trailing:"",shortcut:!0,shortcutRules:[],contentType:"application/json","application/x-www-form-urlencoded":{encode:s},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=c(t,e),c({},this._opts)}},{key:"_request",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.indexOf("?")===-1?t+=this._opts.trailing:t=t.replace("?",this._opts.trailing+"?");var s=new XMLHttpRequest;if(s.open(e,this.host+t,!0),o){var i=this._opts[o];i&&i.encode&&(n=u(i.encode,n)),"multipart/form-data"===o&&"FormData"===n.constructor.name||s.setRequestHeader("Content-Type",o)}var c=new Promise(function(e,t){return s.onreadystatechange=function(){if(4===s.readyState)if(r.emit("response",s),c.emit("response",s),200===s.status||201===s.status||204===s.status){r.emit("success",s),c.emit("success",s);var n=s.response,o=s.getResponseHeader("Content-Type");if(o){var i=o.split(";")[0],a=r._opts[i];a&&a.decode&&(n=u(a.decode,n))}c.off(),e(n)}else r.emit("error",s),c.emit("error",s),c.off(),t(s)}});return new l.default(c),setTimeout(function(){r.emit("request",s),c.emit("request",s),s.send(n)},0),c}}]),e}();e.exports=p},function(e,t){e.exports=function(e){var t={},r=[];e=e||this,e.on=function(r,n,o){return(t[r]=t[r]||[]).push([n,o]),e},e.off=function(n,o){n||(t={});for(var s=t[n]||r,u=s.length=o?s.length:0;u--;)o==s[u][0]&&s.splice(u,1);return e},e.emit=function(n){for(var o,s=t[n]||r,u=s.length>0?s.slice(0,s.length):s,i=0;o=u[i++];)o[0].apply(o[1],r.slice.call(arguments,1));return e}}}])});
//# sourceMappingURL=rest-client.min.js.map